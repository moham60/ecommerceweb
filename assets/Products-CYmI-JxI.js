import{r,c as N,b as w,j as e,L as d,d as m,F as i,f as k,h as C,e as E,k as u,a as L}from"./index-F-ZMroND.js";import{u as P}from"./useQuery-BDSxYnkL.js";import{u as _}from"./useWish-DWvPcvtc.js";import{s as A}from"./shopping-cart-Br3O6plt.js";import{u as I}from"./useAddtoCart-DCtDrf6T.js";function O(){async function x(){return L.get("https://ecommerce.routemisr.com/api/v1/products")}const{data:o,isLoading:f}=P({queryKey:["Product"],queryFn:x}),{wishListArray:a,AddProductToWishlist:h,removeProductToWishlist:g}=_(),p=I(),{isLoadingCartOperation:j}=r.useContext(N);function b(s){var t=!1;a.map(c=>{if(c.id===s){const y=g(s);localStorage.setItem("wishListArray",JSON.parse(a)),y&&(u.success("success to remove from wish list"),document.getElementById(s).classList.remove("toggole-heart")),t=!0}}),t||h(s)&&(u.success("success to added to wish list"),document.getElementById(s).classList.add("toggole-heart"))}const{token:l}=r.useContext(w),v=r.useRef(null);r.useEffect(()=>{l&&v&&(a==null||a.map(s=>{var t=document.getElementById(s.id);t&&t.classList.add("toggole-heart")}))},[l]);const n=o==null?void 0:o.data.data;return e.jsxs("div",{className:"dark:bg-black bg relative p-4",children:[e.jsx("div",{className:"inpt  p-6",children:e.jsx("input",{type:"text",className:"w-[80%]  mx-auto block rounded border-1 border-[blue]   ",placeholder:"Search By Product Name"})}),j?e.jsxs("div",{className:"fixed z-10 flex items-center justify-center left-0 right-0 top-0 bottom-0 bg-[#e9dede8c]",children:[e.jsx(d,{}),";"]}):"",e.jsxs("div",{className:"container mx-auto p-10",children:[f&&e.jsx(d,{}),e.jsx("div",{className:"grid gap-6 lg:grid-cols-5 md:grid-cols-3 sm:grid-cols-2",children:n&&n.map(s=>e.jsxs(m,{to:`/productDetails/${s._id}`,className:"p-6 product  bg-white dark:bg-[#222] dark:text-white overflow-hidden group  cursor-pointer my-4 shadow-lg relative",children:[e.jsx("img",{className:"w-full",src:s.imageCover,alt:""}),e.jsx("h2",{className:" text-green-500",children:s.category.name}),e.jsx("h2",{children:s.title.split(" ",2).join(" ")}),e.jsxs("div",{className:"flex items-center justify-between  pb-4",children:[e.jsxs("span",{children:[s.price,"EGP"]}),e.jsxs("span",{children:[e.jsx(i,{icon:k,className:" text-yellow-300"}),s.ratingsAverage]})]}),e.jsxs("button",{onClick:t=>{p(s._id),t.preventDefault()},className:"bg-[#17f317] absolute group-hover:translate-y-0  left-[50%] translate-x-[-50%] transition-all bottom-2 translate-y-[150%] right-1 w-[80%]  p-1 text-white rounded-lg flex items-center justify-center ",children:[e.jsx("span",{className:"me-2",children:e.jsx("img",{className:"w-6",src:A,alt:""})}),"Add to cart"]}),e.jsx("button",{onClick:t=>{b(s._id),t.preventDefault()},className:"absolute  transition-all top-0 left-1 h-3 w-3 p-3  rounded flex items-center justify-center",children:e.jsx(i,{icon:C,id:s._id})}),e.jsx(m,{to:`/productDetails/${s._id}`,className:"absolute right-1 top-0 hover:text-[red] transition-all duration-500",children:e.jsx(i,{icon:E})})]},s._id))})]})]})}export{O as default};
