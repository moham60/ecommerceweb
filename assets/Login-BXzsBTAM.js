import{u as h,r as s,j as e,k as p,G as v}from"./index-B3bUcFlg.js";import{a as f}from"./axios-upsvKRUO.js";import{u as k}from"./formik.esm-3XkGznfz.js";import{S as w,c as S,a as x,j as L}from"./index-DEZOUk3E.js";import{authenticateObj as y}from"./Authentication-DSLA3MB6.js";import{L as j}from"./LoaderScreen-DTQV6_p_.js";import"./hoist-non-react-statics.cjs-C-Qo8PK8.js";function C({values:l}){const m=h(),[u,n]=s.useState(!1),{setToken:d}=s.useContext(y);async function c(r){n(!0),f.post("https://ecommerce.routemisr.com/api/v1/auth/signin",r).then(t=>{n(!1),p.success("welcome back",{duration:2e3,position:"top-center"}),(()=>{m("/home")})(),d(t.data.token),localStorage.setItem("tkn",t.data.token)}).catch(t=>{w.fire({title:"Oops!",text:t.response.data.message,icon:"error",button:"Try Again"}),n(!1)})}const i=k({initialValues:{values:l},onSubmit:r=>{console.log("v",r),console.log(r.values);const t={email:r.values.email,password:r.password};console.log(t),c(t)}});return e.jsxs("div",{className:"py-8 bg",children:[u?e.jsxs("div",{className:"fixed z-10 flex items-center justify-center left-0 right-0 top-0 bottom-0 bg-[#e9dede8c]",children:[e.jsx(j,{}),";"]}):"",e.jsxs("form",{className:" w-[90%] md:w-[50%] lg:w-[35%]  bg-white mx-auto shadow-lg dark:bg-black  dark:text-b rounded-lg p-5",onSubmit:i.handleSubmit,children:[e.jsx("h1",{className:"text-center dark:text-white my-2 text-black font-bold text-3xl",children:"Login By Google Account"}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your email"}),e.jsx("input",{type:"email",id:"email",value:l.email,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:""})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your password"}),e.jsx("input",{type:"password",onChange:i.handleChange,onBlur:i.handleBlur,id:"password",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"})]}),e.jsx("button",{type:"submit",className:"text-white bg-[#0a1179] hover:bg-[blue] focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2 text-center ",children:"Login"})]})]})}function A(){const l=h(),{setToken:m}=s.useContext(y);let u={email:"",password:""};const[n,d]=s.useState(!1),[c,i]=s.useState(null);async function r(a){d(!0),f.post("https://ecommerce.routemisr.com/api/v1/auth/signin",a).then(o=>{d(!1),p.success("welcome back",{duration:2e3,position:"top-center"}),(()=>{l("/home")})(),m(o.data.token),localStorage.setItem("tkn",o.data.token)}).catch(o=>{w.fire({title:"Oops!",text:o.response.data.message,icon:"error",button:"Try Again"}),d(!1)})}const t=k({initialValues:{user:u},onSubmit:a=>{if(console.log(a),c){console.log(a);const o={email:a.values.email,password:a.password};r(o)}else r(a)},validationSchema:S().shape({email:x().email().required("email is required"),password:x().required("password is required")})}),[g,N]=s.useState(!1);return e.jsx(e.Fragment,{children:g?e.jsx(C,{values:c}):e.jsxs("div",{className:" py-8 login    dark:bg-black dark:text-white",children:[n?e.jsxs("div",{className:"fixed z-10 flex items-center justify-center left-0 right-0 top-0 bottom-0 bg-[#e9dede8c]",children:[e.jsx(j,{}),";"]}):"",e.jsxs("form",{className:" w-[90%] bg md:w-[50%] lg:w-[35%]  bg-white mx-auto shadow-lg dark:bg-black  dark:text-b rounded-lg p-5",onSubmit:t.handleSubmit,children:[e.jsx("h1",{className:"text-center dark:text-white my-2 text-black font-bold text-3xl",children:"Login Now"}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your email"}),e.jsx("input",{type:"email",id:"email",onChange:t.handleChange,onBlur:t.handleBlur,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:""}),t.errors.email&&t.touched.email?e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 mt-2 rounded-lg bg-red-50 dark:bg-gray-800  dark:text-red-400 ",role:"alert",children:e.jsx("span",{className:"font-medium",children:t.errors.email})}):""]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your password"}),e.jsx("input",{type:"password",onChange:t.handleChange,onBlur:t.handleBlur,id:"password",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),t.errors.password&&t.touched.password?e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 mt-2 rounded-lg bg-red-50 dark:bg-gray-800  dark:text-red-400 ",role:"alert",children:e.jsx("span",{className:"font-medium",children:t.errors.password})}):""]}),e.jsx("button",{type:"submit",className:"text-white bg-[#0a1179] hover:bg-[blue] focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2 text-center ",children:"Login"}),e.jsx("button",{className:"w-full mt-2",children:e.jsx(v,{onSuccess:a=>{console.log(a);const o=L(a.credential);console.log(o);const b={email:o.email,password:""};i(b),N(!0)},onError:()=>{console.log("Login Failed")}})})]}),e.jsx("button",{onClick:()=>{l("/forgotpass")},className:" mt-4 text-2xl text-black hover:underline hover:text-[#0a1179]",children:"Forgot your Password"})]})})}export{A as default};
