import{u as b,r as g,d as j,j as e,L as N,a as h,k as x,G as v}from"./index-omah4i2p.js";import{u as p}from"./formik.esm-COlEXDd6.js";import{c as f,a as n,b as k,S as w}from"./index.esm-D2WGe3eV.js";import"./hoist-non-react-statics.cjs-C-Qo8PK8.js";class u extends Error{}u.prototype.name="InvalidTokenError";function P(o){return decodeURIComponent(atob(o).replace(/(.)/g,(s,l)=>{let t=l.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t}))}function C(o){let s=o.replace(/-/g,"+").replace(/_/g,"/");switch(s.length%4){case 0:break;case 2:s+="==";break;case 3:s+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return P(s)}catch{return atob(s)}}function B(o,s){if(typeof o!="string")throw new u("Invalid token specified: must be a string");s||(s={});const l=s.header===!0?0:1,t=o.split(".")[l];if(typeof t!="string")throw new u(`Invalid token specified: missing part #${l+1}`);let m;try{m=C(t)}catch(i){throw new u(`Invalid token specified: invalid base64 for part #${l+1} (${i.message})`)}try{return JSON.parse(m)}catch(i){throw new u(`Invalid token specified: invalid json for part #${l+1} (${i.message})`)}}function S({values:o}){const s=b(),[l,t]=g.useState(!1),{setToken:m}=g.useContext(j);async function i(r){t(!0),h.post("https://ecommerce.routemisr.com/api/v1/auth/signup",r).then(d=>{t(!1),x.success("welcome back",{duration:2e3,position:"top-center"}),(()=>{s("/home")})(),m(d.data.token),localStorage.setItem("tkn",d.data.token)}).catch(d=>{w.fire({title:"Oops!",text:d.response.data.message,icon:"error",button:"Try Again"}),t(!1)})}const a=p({initialValues:{values:o},onSubmit:r=>{console.log("v",r),console.log(r.values);const d={name:r.values.name,email:r.values.email,password:r.password,rePassword:r.rePassword,phone:r.phone};console.log(d),i(d)},validationSchema:f().shape({password:n().min(6,"Password must be 6 charachters or more").max(20,"Password is very large must be less than Characters").required("password is required"),rePassword:n().oneOf([k("password")],"Passwords must be match").required("Please confirm your password"),phone:n().required("Phone is required").matches(/^(20)?01[0125][0-9]{8}$/,"Phone must be Egptian Number")})});return e.jsxs("div",{className:"py-8 bg",children:[l?e.jsxs("div",{className:"fixed z-10 flex items-center justify-center left-0 right-0 top-0 bottom-0 bg-[#e9dede8c]",children:[e.jsx(N,{}),";"]}):"",e.jsxs("form",{className:" w-[90%] md:w-[50%] lg:w-[35%]  bg-white mx-auto shadow-lg dark:bg-black  dark:text-b rounded-lg p-5",onSubmit:a.handleSubmit,children:[e.jsx("h1",{className:"text-center dark:text-white my-2 text-black font-bold text-3xl",children:"Login By Google Account"}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your email"}),e.jsx("input",{type:"email",id:"email",value:o.email,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:""})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your password"}),e.jsx("input",{type:"password",onChange:a.handleChange,onBlur:a.handleBlur,id:"password",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),a.errors.password&&a.touched.password?e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 mt-2 rounded-lg bg-red-50 dark:bg-gray-800  dark:text-red-400 ",role:"alert",children:e.jsx("span",{className:"font-medium",children:a.errors.password})}):""]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"repassword",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"rePassword"}),e.jsx("input",{onChange:a.handleChange,onBlur:a.handleBlur,type:"password",id:"repassword",autoComplete:"off",name:"rePassword",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400  dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),a.errors.rePassword&&a.touched.rePassword?e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 mt-2 rounded-lg bg-red-50 dark:bg-gray-800  dark:text-red-400 ",role:"alert",children:e.jsx("span",{className:"font-medium",children:a.errors.rePassword})}):""]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"phone",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Phone"}),e.jsx("input",{onChange:a.handleChange,type:"tel",id:"phone",name:"phone",autoComplete:"off",onBlur:a.handleBlur,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400  dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),a.errors.phone&&a.touched.phone?e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 mt-2 rounded-lg bg-red-50 dark:bg-gray-800  dark:text-red-400 ",role:"alert",children:e.jsx("span",{className:"font-medium",children:a.errors.phone})}):""]}),e.jsx("button",{type:"submit",className:"text-white bg-[#0a1179] hover:bg-[blue] focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2 text-center ",children:"Login"})]})]})}function $(){const o=b(),[s,l]=g.useState(!1),[t,m]=g.useState(null);let i={name:"",email:"",password:"",rePassword:"",phone:""};async function a(d){h.post("https://ecommerce.routemisr.com/api/v1/auth/signup",d).then(()=>{x.success("welcome back",{duration:2e3,position:"top-center",icon:"👏"}),(()=>{setTimeout(()=>{o("/home")},3e3)})()}).catch(c=>{w.fire({title:"Oops!",text:c.response.data.message,icon:"error",button:"Try Again"})})}const r=p({initialValues:{user:i},onSubmit:a,validationSchema:f().shape({name:n().min(3,"Name Must be three Characters or More").max(14,"Name Must be less than 14 characters").required("Name is required"),password:n().min(6,"Password must be 6 charachters or more").max(20,"Password is very large must be less than Characters").required("password is required"),email:n().email("email is not Valid").required("email is required"),rePassword:n().oneOf([k("password")],"Passwords must be match").required("Please confirm your password"),phone:n().required("Phone is required").matches(/^(20)?01[0125][0-9]{8}$/,"Phone must be Egptian Number")})});return e.jsx(e.Fragment,{children:s?e.jsx(S,{values:t}):e.jsx("div",{className:"py-8 register   dark:bg-black dark:text-white ",children:e.jsxs("form",{className:"w-[90%] md:w-[50%] lg:w-[35%] dark:bg-black  bg-white shadow-lg p-6 rounded-lg mx-auto",onSubmit:r.handleSubmit,children:[e.jsx("h1",{className:"text-center my-2  font-bold text-3xl",children:"Register Now"}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"name",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your Name"}),e.jsx("input",{onChange:r.handleChange,type:"text",id:"name",value:r.initialValues.name,onBlur:r.handleBlur,name:"name",autoComplete:"off",className:"bg-gray-50  border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400  dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:""}),r.errors.name&&r.touched.name?e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 mt-2 rounded-lg bg-red-50 dark:bg-gray-800  dark:text-red-400 ",role:"alert",children:e.jsx("span",{className:"font-medium",children:r.errors.name})}):""]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your Email"}),e.jsx("input",{onChange:r.handleChange,type:"email",value:r.initialValues.email,onBlur:r.handleBlur,id:"email",name:"email",autoComplete:"off",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400  dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:""}),r.errors.email&&r.touched.email?e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 mt-2 rounded-lg bg-red-50 dark:bg-gray-800  dark:text-red-400 ",role:"alert",children:e.jsx("span",{className:"font-medium",children:r.errors.email})}):""]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"password",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Your Password"}),e.jsx("input",{onChange:r.handleChange,type:"password",id:"password",autoComplete:"off",value:r.initialValues.password,onBlur:r.handleBlur,name:"password",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400  dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),r.errors.password&&r.touched.password?e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 mt-2 rounded-lg bg-red-50 dark:bg-gray-800  dark:text-red-400 ",role:"alert",children:e.jsx("span",{className:"font-medium",children:r.errors.password})}):""]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"repassword",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"rePassword"}),e.jsx("input",{onChange:r.handleChange,onBlur:r.handleBlur,type:"password",id:"repassword",autoComplete:"off",value:r.initialValues.rePassword,name:"rePassword",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400  dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),r.errors.rePassword&&r.touched.rePassword?e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 mt-2 rounded-lg bg-red-50 dark:bg-gray-800  dark:text-red-400 ",role:"alert",children:e.jsx("span",{className:"font-medium",children:r.errors.rePassword})}):""]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("label",{htmlFor:"phone",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Phone"}),e.jsx("input",{onChange:r.handleChange,type:"tel",id:"phone",name:"phone",autoComplete:"off",value:r.initialValues.phone,onBlur:r.handleBlur,className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400  dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"}),r.errors.phone&&r.touched.phone?e.jsx("div",{className:"p-4 mb-4 text-sm text-red-800 mt-2 rounded-lg bg-red-50 dark:bg-gray-800  dark:text-red-400 ",role:"alert",children:e.jsx("span",{className:"font-medium",children:r.errors.phone})}):""]}),e.jsx("button",{type:"submit",className:"text-white  bg-[#0a1179] hover:bg-[blue] focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2 text-center ",children:"Register"}),e.jsx("div",{className:"social flex flex-col items-center gap-2 mt-4",children:e.jsx("button",{className:"w-full",children:e.jsx(v,{onSuccess:d=>{console.log(d);const c=B(d.credential),y={name:c.given_name,email:c.email,password:"",rePassword:"",phone:""};m(y),l(!0)},onError:()=>{console.log("Login Failed")}})})})]})})})}export{$ as default};
